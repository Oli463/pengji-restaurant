<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>å½­è®°é¥­åº— Â· å•†å®¶åå°</title>
<style>
/* --- æ ·å¼åŒä½ ç°åœ¨çœ‹åˆ°çš„ï¼Œæ— æ”¹åŠ¨ --- */
</style>
</head>
<body>
<h1>ğŸ“¦ å•†å®¶è®¢å•åå°</h1>
<div id="orders"></div>

<script>
/* â˜…â˜… å…³é”®æ”¹åŠ¨ â‘¡ â€”â€” ä» localStorage è¯»å–è®¢å• â˜…â˜… */
function loadOrders(){
  return JSON.parse(localStorage.getItem('orders')||'[]');
}
let orderData = loadOrders();   // åˆå§‹åŠ è½½

function renderOrders(){
  const box = document.getElementById('orders');
  box.innerHTML = '';
  orderData.forEach((o,idx)=>{
    const div = document.createElement('div');
    div.className = 'order';
    div.innerHTML = `
      <h3>è®¢å• #${o.id}</h3>
      <p><strong>ç”µè¯ï¼š</strong>${o.customer}</p>
      <p><strong>åœ°å€ï¼š</strong>${o.address}</p>
      <ul>${ o.items.map(i=>`<li>${i.name} Ã— ${i.qty}</li>`).join('') }</ul>
      <p><strong>æ€»è®¡ï¼š</strong>${o.total.toLocaleString()} UGX</p>
      <p class="status">å½“å‰çŠ¶æ€ï¼š${o.status}</p>
      <button class="btn accept"   onclick="updateStatus(${idx},'å·²æ¥å•')">âœ… æ¥å•</button>
      <button class="btn decline"  onclick="updateStatus(${idx},'å·²æ‹’å•')">âŒ æ‹’å•</button>
      <button class="btn inprogress" onclick="updateStatus(${idx},'é…é€ä¸­')">ğŸšš é…é€ä¸­</button>
      <button class="btn complete" onclick="updateStatus(${idx},'å·²å®Œæˆ')">ğŸ å®Œæˆ</button>
    `;
    box.appendChild(div);
  });
}

function saveOrders(){ localStorage.setItem('orders', JSON.stringify(orderData)); }

function updateStatus(i,newS){
  orderData[i].status = newS;
  saveOrders();       // å†™å› storageï¼Œé¡¾å®¢ç«¯ä¹Ÿèƒ½çœ‹åˆ°æ›´æ–°
  renderOrders();
}

renderOrders();

/* â˜…â˜… å…³é”®æ”¹åŠ¨ â‘¢ â€”â€” æ¯ 3 ç§’è‡ªåŠ¨æ£€æŸ¥æ–°è®¢å• â˜…â˜… */
setInterval(()=>{
  orderData = loadOrders();     // é‡æ–°æŠ“æœ€æ–°æ•°æ®
  renderOrders();               // åˆ·æ–°ç•Œé¢
}, 3000);
</script>
</body>
</html>
